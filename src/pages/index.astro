---
import BaseLayout from '../layouts/Baselayout.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <div class="hero-container">
    <div class="magnetic-area" id="magnetic-area">
      <svg
        class="hero-svg"
        id="hero-title"
        viewBox="0 0 1200 600"
        xmlns="http://www.w3.org/2000/svg"
        preserveAspectRatio="xMidYMid meet"
      >
        <text x="50%" y="30%" class="svg-line line-1">
          The Lust for life
        </text>

        <text x="50%" y="65%" class="svg-line line-2">
          keeps us alive
        </text>
      </svg>
    </div>

    <p class="subtitle">This is crescentyves</p>
  </div>
</BaseLayout>

<script>
  function initMagneticHero() {
    const area = document.getElementById('magnetic-area');
    const title = document.getElementById('hero-title');

    if (area && title) {
      area.addEventListener('mousemove', (e) => {
        const { clientX, clientY } = e;
        const rect = area.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;

        // 计算鼠标距离中心的偏移量
        const deltaX = clientX - centerX;
        const deltaY = clientY - centerY;

        // 磁力效果：这里可以微调系数来改变跟手程度
        // translate3d 负责位移，rotateX/Y 负责 3D 倾斜
        title.style.transform = `
          perspective(1000px)
          translate3d(${deltaX * 0.1}px, ${deltaY * 0.1}px, 0)
          rotateX(${-deltaY * 0.02}deg)
          rotateY(${deltaX * 0.02}deg)
        `;
      });

      // 鼠标移出时复位
      area.addEventListener('mouseleave', () => {
        title.style.transform = `
          perspective(1000px)
          translate3d(0, 0, 0)
          rotateX(0)
          rotateY(0)
        `;
      });
    }
  }
  document.addEventListener('astro:page-load', initMagneticHero);
</script>

<style>
  .hero-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh; /* 占满全屏，确保分界线位置准确 */
    position: relative;
    z-index: 10;
  }

  .magnetic-area {
    width: 100%;
    height: 80vh; /* 限制交互区域高度 */
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .hero-svg {
    width: 100%;
    max-width: 1200px;
    height: auto;
    overflow: visible;
    pointer-events: none;
    transition: transform 0.1s linear; /* 略微加快响应速度 */
  }

  .svg-line {
    font-family: var(--font-serif);
    font-weight: 800;
    text-anchor: middle;
    opacity: 0;
  }

  /* --- 上半句样式 (位于亮色背景) --- */
  .line-1 {
    font-size: 7rem;

    /* 【重要 UI 调整】
       原本是 var(--c-ice-blue) (浅冰蓝)。
       因为你把它移到了白/浅色背景区，浅蓝字会看不清。
       建议改为深蓝色 (var(--c-nav-text) #003366) 以确保可读性。
       如果你坚持用浅色字，必须加很重的阴影。
    */
    fill: #003366; /* 建议：深蓝，与下方深海呼应 */
    /* fill: var(--c-ice-blue);  <-- 如果你坚持要原来的浅色，用这行 */

    /* 即使是深色字，加一点浅色发光可以让它看起来像“逆光” */
    filter: drop-shadow(0 0 20px rgba(179, 217, 255, 0.6));

    animation: cinematic-reveal-1 1.5s cubic-bezier(0.19, 1, 0.22, 1) forwards;
  }

  /* --- 下半句样式 (位于深色背景) --- */
  .line-2 {
    font-size: 8rem;
    fill: #FFF100; /* 黄色，在深蓝背景上对比度极佳 */
    font-style: italic;

    /* 黄色辉光 */
    filter: drop-shadow(0 0 25px rgba(255, 241, 0, 0.4));

    animation: cinematic-reveal-2 1.5s cubic-bezier(0.19, 1, 0.22, 1) forwards;
    animation-delay: 0.2s;
  }

  .subtitle {
    position: absolute;
    bottom: 5%; /* 将副标题固定在底部，避免干扰中间的视觉 */
    font-size: 1rem;
    letter-spacing: 0.4em;
    text-transform: uppercase;
    color: var(--c-ice-blue);
    opacity: 0;
    animation: fade-in 1.2s ease-out 1s forwards;
  }

  @keyframes cinematic-reveal-1 {
    from { opacity: 0; transform: translateY(50px); filter: blur(20px); }
    to { opacity: 1; transform: translateY(0); filter: drop-shadow(0 0 20px rgba(179, 217, 255, 0.6)); }
  }

  @keyframes cinematic-reveal-2 {
    from { opacity: 0; transform: translateY(50px); filter: blur(20px); }
    to { opacity: 1; transform: translateY(0); filter: drop-shadow(0 0 25px rgba(255, 241, 0, 0.4)); }
  }

  @keyframes fade-in {
    to { opacity: 0.8; }
  }

  @media (max-width: 768px) {
    /* 手机端调整 viewBox 或字体大小 */
    .line-1 { font-size: 5rem; }
    .line-2 { font-size: 6rem; }
  }
</style>