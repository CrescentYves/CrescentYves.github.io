---
import BaseLayout from '../layouts/Baselayout.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <div class="hero-container">
    <!-- 将文字包裹在一个可交互区域内 -->
    <div class="magnetic-area" id="magnetic-area">
      <h1 class="hero-title" id="hero-title">
        <span class="line line-1">The Lust for life</span>
        <span class="line line-2">keeps us alive</span>
      </h1>
    </div>
    <p class="subtitle">This is crescentyves</p>
  </div>
</BaseLayout>

<script>
  // === 磁性拖拽与倾斜交互 ===
  const area = document.getElementById('magnetic-area');
  const title = document.getElementById('hero-title');

  if (area && title) {
    area.addEventListener('mousemove', (e) => {
      const { clientX, clientY } = e;
      const rect = area.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;

      // 计算鼠标距离中心的距离
      const deltaX = clientX - centerX;
      const deltaY = clientY - centerY;

      // 1. 拖拽位移 (Translation): 鼠标动100px，文字动 25px (系数0.25)
      // 这制造了"拉扯"的感觉
      const moveX = deltaX * 0.25;
      const moveY = deltaY * 0.25;

      // 2. 3D 倾斜 (Rotation): 保留之前的效果，增强立体感
      const rotateX = -deltaY * 0.05; // 上下移动导致绕X轴旋转
      const rotateY = deltaX * 0.05;  // 左右移动导致绕Y轴旋转

      // 应用变换：注意这里加了 smooth transition 在 CSS 里
      title.style.transform = `
        perspective(1000px)
        translate3d(${moveX}px, ${moveY}px, 0)
        rotateX(${rotateX}deg)
        rotateY(${rotateY}deg)
      `;
    });

    // 鼠标离开时，弹回原位
    area.addEventListener('mouseleave', () => {
      title.style.transform = `
        perspective(1000px)
        translate3d(0, 0, 0)
        rotateX(0)
        rotateY(0)
      `;
    });
  }
</script>

<style>
  .hero-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 80vh;
    position: relative;
    z-index: 10;
  }

  /* 交互区域：比文字本身大一圈，方便捕捉鼠标 */
  .magnetic-area {
    padding: 100px; /* 增加感应范围 */
    margin: -100px; /* 抵消 padding 不影响布局 */
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .hero-title {
    font-family: "Times New Roman", serif;
    font-size: clamp(3rem, 7vw, 6.5rem);
    font-weight: 700;
    line-height: 1.1;
    text-align: center;
    margin: 0;
    cursor: default; /* 提示用户这里有些不同 */

    /* 关键：弹簧回弹动画 */
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  .line {
    display: block;
    /* 初始入场动画 */
    opacity: 0;
    filter: blur(15px);
    transform: translateY(30px);
    animation: cinematic-reveal 1.5s cubic-bezier(0.2, 1, 0.3, 1) forwards;
  }

  /* 第一行文字：嫩蓝色 */
  .line-1 {
    color: var(--c-text-main); /* 使用我们在 BaseLayout 定义的变量 */

    /* 增加外发光，模拟 HDR 辉光，让它在亮背景下也能看清 */
    text-shadow: 0 0 20px rgba(19, 102, 183, 0.4), 0 0 5px rgba(255,255,255,0.5);
  }

  /* 第二行文字：高亮黄 (保留撞色) */
  .line-2 {
    color: #fff100;
    font-style: italic;
    animation-delay: 0.2s;
    /* 稍微强一点的投影，增加层次 */
    text-shadow: 0 10px 20px rgba(19, 102, 183, 0.5);
  }

  .subtitle {
    margin-top: 3rem;
    font-size: 0.9rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.9);
    opacity: 0;
    animation: fade-in 1s ease-out 0.8s forwards;
    pointer-events: none; /* 防止遮挡拖拽 */
  }

  @keyframes cinematic-reveal {
    to { opacity: 1; filter: blur(0); transform: translateY(0); }
  }
  @keyframes fade-in {
    to { opacity: 0.9; }
  }
</style>