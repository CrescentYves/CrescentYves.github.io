---
import BaseLayout from './Baselayout.astro';
import FormattedDate from '../components/FormattedDate.astro';

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<BaseLayout title={title} description={description}>
  <article class="work-article">

    <div class="glass-container">

      <div class="work-header">
        <div class="meta">
          <FormattedDate date={pubDate} />
          {updatedDate && <div class="last-updated-on">Last updated on <FormattedDate date={updatedDate} /></div>}
        </div>
        <h1 class="title">{title}</h1>
        <hr class="header-line"/>
      </div>

      {heroImage && <div class="hero-image"><img src={heroImage} alt={title} /></div>}

      <div class="prose">
        <slot />
      </div>

    </div>
  </article>
</BaseLayout>

<style>
  /* --- 颜色变量 --- */
  :root {
    /* 在白底上，原来的浅粉色(#FFB6C1)看不清，改为稍微深一点的洋红粉，保持甜美但可读 */
    --c-pink-accent: #E06C9F;
    --c-text-dark: #1a202c; /* 深灰色正文 */
    --c-text-meta: #555;    /* 辅助信息颜色 */
  }

  /* --- 外部容器 --- */
  .work-article {
    width: 100%;
    max-width: 860px;
    margin: 0 auto;
    padding: 3rem 1rem;
    box-sizing: border-box;
  }

  /* --- 毛玻璃容器 (核心修改) --- */
  .glass-container {
    /* 关键点：0.85 的白色背景
      既能透出一点点背景图的色调，又能保证看起来是“实心”的雾化玻璃
    */
    background: rgba(255, 255, 255, 0.85);

    /* 强力模糊，把背后的图片彻底虚化成光晕 */
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);

    /* 边框和阴影增加层次感 */
    border: 1px solid rgba(255, 255, 255, 0.6);
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);

    padding: 3rem 4rem; /* 宽敞的内边距 */
  }

  /* --- 头部样式 --- */
  .work-header {
    text-align: center;
    margin-bottom: 2.5rem;
  }

  .meta {
    font-family: var(--font-serif);
    color: var(--c-text-meta);
    font-size: 0.95rem;
    margin-bottom: 0.5rem;
    letter-spacing: 0.05em;
  }

  .title {
    font-size: 2.8rem;
    margin: 0.5rem 0 1.5rem 0;
    font-weight: 700;
    line-height: 1.1;
    color: #000; /* 标题纯黑 */
    letter-spacing: -0.02em;
  }

  .header-line {
    width: 60px;
    height: 2px;
    background: var(--c-pink-accent);
    border: none;
    margin: 0 auto;
  }

  .hero-image img {
    width: 100%;
    border-radius: 8px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    margin-bottom: 3rem;
    display: block;
  }

  /* --- 正文排版 (Prose) --- */
  .prose {
    font-family: var(--font-serif);
    font-size: 1.15rem;
    line-height: 1.85;
    /* 背景变白了，文字必须变黑 */
    color: var(--c-text-dark);
    text-align: justify;
  }

  .prose :global(p) {
    margin-bottom: 1.5rem;
  }

  /* 引用块 */
  .prose :global(blockquote) {
    border-left: 4px solid var(--c-pink-accent);
    background: rgba(224, 108, 159, 0.08); /* 淡粉色背景 */
    padding: 1rem 1.5rem;
    margin: 2rem 0;
    font-style: italic;
    color: #444;
    border-radius: 0 8px 8px 0;
  }

  /* 二级标题 */
  .prose :global(h2) {
    font-size: 1.8rem;
    margin-top: 4rem;
    margin-bottom: 1.5rem;
    text-align: center;
    font-weight: bold;
    color: #111;
  }

  /* 分割线 */
  .prose :global(hr) {
    border: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    margin: 4rem auto;
    width: 30%;
  }

  /* --- 粉色强调 --- */

  /* 加粗文字变粉色 */
  .prose :global(strong) {
    color: var(--c-pink-accent);
    font-weight: 700;
  }

  /* 链接变粉色 */
  .prose :global(a) {
    color: var(--c-pink-accent);
    text-decoration: none;
    border-bottom: 1px dotted var(--c-pink-accent);
    transition: all 0.2s;
  }
  .prose :global(a:hover) {
    background: rgba(224, 108, 159, 0.1);
    border-bottom-style: solid;
  }

  /* --- 文内图片 --- */
  .prose :global(img) {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 3rem auto;
    border-radius: 6px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  }

  /* 移动端适配 */
  @media (max-width: 768px) {
    .glass-container { padding: 2rem 1.5rem; }
    .title { font-size: 2rem; }
    .prose { font-size: 1.05rem; }
  }
</style>